
@{
    Layout = null;
}



<style>
    #form-container {
        margin: 10px;
        margin-left: 50px;

        position: absolute;
        overflow-y: scroll;
    }

    #form-container md-slider {
        position: relative;
        left: 15px;
        margin: 20px;
    }

    input:focus {
        outline: none !important;
    }

    a:hover {
        text-decoration: none;
    }

    .invisible {
        visibility: hidden
    }
</style>

<!--Modal styles-->
<link href="~/Content/Dashboard/Search/modal-styles.css" rel="stylesheet" />
<link href="~/Content/Dashboard/Search/card-styles.css" rel="stylesheet" />
<link href="~/Content/Dashboard/Search/chips-styles.css" rel="stylesheet" />

<div id="form-container">
    <form class="form-inline">
        
        <div show-during-resolve loader-css="ball-grid-pulse">g... </div>
        <br/>

        <md-switch ng-model="useDefaults" aria-label="Finished?">
            Use defaults
        </md-switch>

        <div id="basic-settings" ng-show="!useDefaults">

            <div class="spinner" ng-class="{'invisible': !loadingOrigin}">
                <div class="cube1"></div>
                <div class="cube2"></div>
            </div>

            <select class="form-control" name="locale" ng-model="settings.selectedLocale" ng-change="loadCountries()">
                <option value="" disabled selected>Select your locale</option>
                <option ng-repeat="locale in settings.locales" value="{{locale.Code}}">{{locale.Name}}</option>
            </select>

            <select class="form-control" name="currency" ng-model="settings.selectedCurrency">
                <option value="" disabled selected>Select your currency</option>
                <option ng-repeat="currency in settings.currencies" value="{{currency.Code}}">{{currency.Symbol}}</option>
            </select>

            <select class="form-control" name="country" ng-model="settings.selectedCountry">
                <option value="" disabled selected>Select your country</option>
                <option ng-repeat="country in settings.countries" value="{{country.Code}}">{{country.Name}}</option>
            </select>
        </div>
        <br/> <br/>


        <p>Origin :</p>
        <div class="spinner" ng-class="{'invisible': !loadingOrigin}">
            <div class="cube1"></div>
            <div class="cube2"></div>
        </div>

        <ui-select ng-model="originPlace.selected" theme="bootstrap">
            <ui-select-match placeholder="Select or search a place in the list...">{{$select.selected.PlaceName}}</ui-select-match>
            <ui-select-choices repeat="item in originPlaces | filter: $select.search"
                               refresh="refreshOrigin($select.search)"
                               refresh-delay="0">
                <div ng-bind-html="item.PlaceName | highlight: $select.search"></div>
                <small ng-bind-html="item.CountryName | highlight: $select.search"></small>
            </ui-select-choices>
        </ui-select>

        <br/>

        <p>Destination :</p>
        <div class="spinner" ng-class="{'invisible': !loadingDestination}">
            <div class="cube1"></div>
            <div class="cube2"></div>
        </div>
        <ui-select ng-model="destinationPlace.selected" theme="bootstrap">
            <ui-select-match placeholder="Select or search a place in the list...">{{$select.selected.PlaceName}}</ui-select-match>
            <ui-select-choices repeat="item in destinationPlaces | filter: $select.search"
                               refresh="refreshDestination($select.search)"
                               refresh-delay="0">
                <div ng-bind-html="item.PlaceName | highlight: $select.search"></div>
                <small ng-bind-html="item.CountryName | highlight: $select.search"></small>
            </ui-select-choices>
        </ui-select>

        <br/> <br/>

        <md-datepicker name="outboundDate" ng-model="outboundDate"></md-datepicker>

        <md-datepicker name="inboundDate" ng-model="inboundDate"></md-datepicker>

        <br/> <br/>

        Adults:
        <md-slider md-discrete name="adults" ng-model="adults" step="1" min="1" max="8">
        </md-slider>
        
        Children:
        <md-slider md-discrete name="children" ng-model="children" step="1" min="0" max="8">
        </md-slider>

        Infants:
        <md-slider md-discrete name="infants" ng-model="infants" step="1" min="0" max="8">
        </md-slider>

        <p>Cabin class :</p>
        <select class="form-control" ng-model="cabinClass" name="cabinClass" ng-model="settings.cabinClass">
            <option value="" disabled selected>Any</option>
            <option ng-repeat="cabinClass in cabinClasses" value="{{cabinClass.Code}}">{{cabinClass.Name}}</option>
        </select>

        <br/> <br/>

        <button ng-click="submitForm()" type="submit" class="btn btn-default">GO</button>

    </form>
</div>




<!-- The Modal -->
<div id="searchResultsModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
        <div class="modal-header">
            <span class="close">&times;</span>
            <h2>Your trip</h2>
        </div>
        <div class="modal-body">
            <div ng-show="!bookingSearchResultsReady" id="results-loader" loader-css="ball-grid-pulse">g... </div>
            <div ng-repeat="quote in searchResults" class="card" class="search-result-card">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/Empire_State_Building_%28HDR%29.jpg/150px-Empire_State_Building_%28HDR%29.jpg" alt="Avatar" style="width:100%">
                <div class="container">
                    <h4><b>{{quote.MinPrice}}</b></h4>
                    <span ng-show="quote.Direct" class="label label-primary">Direct</span>
                    <p>{{formatDate(quote.QuoteDateTime) | date:'MM/dd/yyyy h:mma'}}</p>
                    <p class="btn btn-default" data-toggle="collapse" data-target="#hotels-list-{{$index}}">View hotels >></p>
                    <div id="hotels-list-{{$index}}" class="collapse">
                        <div ng-repeat="quote1 in bookingSearchResults.Hotels">
                            <a href="#" data-toggle="popover" title={{quote1.Name}} data-trigger="hover" data-content={{quote1.Description}}>{{quote1.Name}}</a>
                        </div>
                    </div>
                </div>

                <div class="chip">
                    <i class="fa fa-calendar-check-o" aria-hidden="true"></i>
                    {{formatDate(quote.OutboundLeg.DepartureDate) | date:'MM/dd/yyyy h:mma'}}
                    <span class="closebtn" onclick="this.parentElement.style.display='none'">&times;</span>
                </div>
                <br/>
                <div class="chip">
                    <img src="http://www.lapdonline.org/assets/jpg/los-angeles-by-josh-harris-large.jpg" alt="Person" width="96" height="96">
                    {{quote.OutboundLeg.Origin.Name}}
                    <span class="closebtn" onclick="this.parentElement.style.display='none'">&times;</span>
                </div>
                <i class="fa fa-arrow-right" aria-hidden="true"></i>
                <div class="chip">
                    <img src="http://www3.hilton.com/resources/media/hi/LAXAHHH/en_US/img/shared/full_page_image_gallery/main/HH_santamonicapier_18_1270x560_FitToBoxSmallDimension_Center.jpg" alt="Person" width="96" height="96">
                    {{quote.OutboundLeg.Destination.Name}}
                    <span class="closebtn" onclick="this.parentElement.style.display='none'">&times;</span>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <h3></h3>

        </div>
    </div>

</div>